{"version":3,"sources":["script.js"],"names":["darkButton","document","getElementById","lightButton","setDarkMode","querySelector","classList","setLightMode","colorModeFromLocalStorage","localStorage","getItem","colorModeFromWindow","window","matchMedia","matches","setColorMode","click","radioBtn","querySelectorAll","i","length","addEventListener","e","checked","setItem","event","loadAndUpdateColor"],"mappings":"AAAA,aAWA,IAAMA,WAAaC,SAASC,eAAe,QACrCC,YAAcF,SAASC,eAAe,SAGtCE,YAAc,WAClBH,SAASI,cAAc,QAAQC,UAAY,MAC7C,EACMC,aAAe,WACnBN,SAASI,cAAc,QAAQC,UAAY,OAC7C,EAGME,0BAA4B,WAChC,OAAOC,aAAaC,QAAQ,YAC9B,EAGMC,oBAAsB,WAC1B,OAAOC,OAAOC,WAAW,gCAAgCC,QACrD,OACA,OACN,EAGMC,aAAe,WACsB,QAArCN,aAAaC,QAAQ,cACvBN,cACAJ,WAAWgB,SACmC,SAArCP,aAAaC,QAAQ,eAC9BH,eACAJ,YAAYa,QAEhB,EAEAD,eAIA,IADA,IAAME,SAAWhB,SAASiB,iBAAiB,yBAClCC,EAAI,EAAGA,EAAIF,SAASG,OAAQD,IACnCF,SAASE,GAAGE,iBAAiB,SAAS,SAACC,GACjCtB,WAAWuB,SACbnB,cACAK,aAAae,QAAQ,YAAa,UAElCf,aAAae,QAAQ,YAAa,SAClCjB,eAEJ,IAKFK,OACGC,WAAW,gCACXQ,iBAAiB,UAAU,SAACI,GAC3BA,EAAMX,QAAUd,WAAWgB,QAAUb,YAAYa,OACnD,IAGFU","file":"script.js","sourcesContent":["/* \r\nThe first time the page is loaded, the color mode set on the preference \r\nis used and set as 'default' in the local storage. \r\nChanging the default preferences works the same way as changing the \r\ncolor mode using the buttons, if the page is loaded.\r\nWhen the page is reloaded, whatever is the value set on the local storage\r\nhas precedence over the values in the preference. If the preference\r\nchanged after the page was visited - and the page is not loaded - \r\nthe last value saved on the local storage is loaded. \r\n*/\r\n\r\nconst darkButton = document.getElementById('dark')\r\nconst lightButton = document.getElementById('light')\r\n\r\n// Add class from color.scss\r\nconst setDarkMode = () => {\r\n  document.querySelector('body').classList = 'dark'\r\n}\r\nconst setLightMode = () => {\r\n  document.querySelector('body').classList = 'light'\r\n}\r\n\r\n//Get the color mode at localStorage\r\nconst colorModeFromLocalStorage = () => {\r\n  return localStorage.getItem('colorMode')\r\n}\r\n\r\n// Check window mode color\r\nconst colorModeFromWindow = () => {\r\n  return window.matchMedia('(prefers-color-scheme: dark)').matches\r\n    ? 'dark'\r\n    : 'light' // If preference is set or does not match anything (light is default)\r\n}\r\n\r\n// Toggle button on click\r\nconst setColorMode = () => {\r\n  if (localStorage.getItem('colorMode') == 'dark') {\r\n    setDarkMode()\r\n    darkButton.click()\r\n  } else if (localStorage.getItem('colorMode') == 'light') {\r\n    setLightMode()\r\n    lightButton.click()\r\n  }\r\n}\r\n\r\nsetColorMode()\r\n\r\n// when the inputs are clicked, check which radio button is checked and change the color\r\nconst radioBtn = document.querySelectorAll('.toggle_wrapper input')\r\nfor (let i = 0; i < radioBtn.length; i++) {\r\n  radioBtn[i].addEventListener('click', (e) => {\r\n    if (darkButton.checked) {\r\n      setDarkMode()\r\n      localStorage.setItem('colorMode', 'dark')\r\n    } else {\r\n      localStorage.setItem('colorMode', 'light')\r\n      setLightMode()\r\n    }\r\n  })\r\n}\r\n\r\n// when the prefers-color-scheme changes, this event will be emitted\r\n// event reflects the media query, if it matches, the new color is dark, else it is light\r\nwindow\r\n  .matchMedia('(prefers-color-scheme: dark)')\r\n  .addEventListener('change', (event) => {\r\n    event.matches ? darkButton.click() : lightButton.click()\r\n  })\r\n\r\n// Load the right color on startup - localStorage has precedence\r\nloadAndUpdateColor()\r\n"]}